@model IEnumerable<ShiNengShiHui.Web.Models.Headmaster.Grade.GradeResultViewModel>

<div class="panel">
    <div class="panel-heading">
        @using (Html.BeginForm("GradeIndex", "Headmaster", FormMethod.Get))
        {
            @Html.AntiForgeryToken()
            <div class="col-lg-2">
                @Html.DropDownList("classId", ViewBag.Classes as List<SelectListItem>, new { @Class = "form-control" })
            </div>

            <div class="col-lg-4">
                @Html.DropDownList("selectd", ViewBag.SelectList as List<SelectListItem>, new { @class = "form-control" })
            </div>

            <div class="col-lg-2">
                @Html.TextBox("dateTime", null, new { id = "datetimepicker", @class = "form-control" })
            </div>
            <input class="btn btn-info" type="submit" value="查询">
        }

    </div>
    <div class="panel-body">
        <table class="table table-striped table-hover ">

            <thead>
                <tr>
                    <th>序号</th>
                    <th>姓名</th>
                    <th>时间</th>
                    <th>学期</th>
                    <th>敬</th>
                    <th>善</th>
                    <th>净</th>
                    <th>捡</th>
                    <th>勤</th>
                    <th>静</th>
                    <th>厚</th>
                    <th>乐</th>
                    <th>跑</th>
                    <th>勇</th>
                    <th>总分</th>
                    <th>扣分原因</th>
                </tr>
            </thead>
            <tbody>
                @if (Model == null)
                {

                }
                else
                {
                    int i = 1;
                    foreach (ShiNengShiHui.Web.Models.Headmaster.Grade.GradeResultViewModel m in Model)
                    {
                        <tr>
                            <td>@i</td>
                            <td>@m.StudentName</td>
                            <td>@m.DateTime</td>
                            <td>@m.SchoolYearAndMore</td>
                            <td>@m.Respect</td>
                            <td>@m.Kind</td>
                            <td>@m.Clean</td>
                            <td>@m.Saves</td>
                            <td>@m.Industrious</td>
                            <td>@m.Quiet</td>
                            <td>@m.Honest</td>
                            <td>@m.Enjoy</td>
                            <td>@m.Vigour</td>
                            <td>@m.Brave</td>
                            <td>@m.Sums</td>
                            <td>@m.PenaltyReason</td>

                        </tr>
                        i++;
                    }
                }


            </tbody>
        </table>
    </div>
</div>

@if (Model == null)
{

}
else
{

    int pageIndex = (int)ViewData["pageIndex"];
    int pageCount = (int)ViewData["pageCount"];

    string classId = ViewData["classId"].ToString();
    string selectd = ViewData["selectd"].ToString();
    string dateTime = ViewData["dateTime"].ToString();
    <div class="text-right">

        <ul class="pagination">
            <li><a href="@Url.Action("GradeIndex", "Headmaster", new { pageIndex = 1,classId=classId,selectd=selectd,dateTime=dateTime })">首页</a></li>
            @if (pageIndex <= 5)
            {
                for (int i = 1, length = pageCount; i <= length; i++)
                {
                    if (pageIndex == i)
                    {
                        <li class="active"><a href="@Url.Action("GradeIndex", "Headmaster", new { pageIndex = i,classId=classId,selectd=selectd,dateTime=dateTime })">@i</a></li>
                    }
                    else
                    {
                        <li><a href="@Url.Action("GradeIndex", "Headmaster", new { pageIndex = i,classId=classId,selectd=selectd,dateTime=dateTime })">@i</a></li>
                    }
                }
            }
            else
            {
                if (pageIndex >= 3 && pageIndex <= pageCount - 2)
                {
                    for (int i = pageIndex - 2; i < pageIndex + 2; i++)
                    {
                        if (pageIndex == i)
                        {
                            <li class="active"><a href="@Url.Action("GradeIndex", "Headmaster", new { pageIndex = i,classId=classId,selectd=selectd,dateTime=dateTime })">@i</a></li>
                        }
                        else
                        {
                            <li><a href="@Url.Action("GradeIndex", "Headmaster", new { pageIndex = i,classId=classId,selectd=selectd,dateTime=dateTime })">@i</a></li>
                        }
                    }
                }
                else
                {
                    if (pageIndex <= 2)
                    {
                        for (int i = 1; i <= 5; i++)
                        {
                            if (pageIndex == i)
                            {
                                <li class="active"><a href="@Url.Action("GradeIndex", "Headmaster", new { pageIndex = i,classId=classId,selectd=selectd,dateTime=dateTime })">@i</a></li>
                            }
                            else
                            {
                                <li><a href="@Url.Action("GradeIndex", "Headmaster", new { pageIndex = i,classId=classId,selectd=selectd,dateTime=dateTime })">@i</a></li>
                            }
                        }
                    }
                    else
                    {
                        for (int i = pageCount - 4; i <= pageCount; i++)
                        {
                            if (pageIndex == i)
                            {
                                <li class="active"><a href="@Url.Action("GradeIndex", "Headmaster", new { pageIndex = i,classId=classId,selectd=selectd,dateTime=dateTime })">@i</a></li>
                            }
                            else
                            {
                                <li><a href="@Url.Action("GradeIndex", "Headmaster", new { pageIndex = i,classId=classId,selectd=selectd,dateTime=dateTime })">@i</a></li>
                            }
                        }
                    }
                }
            }
            <li><a href="@Url.Action("GradeIndex", "Headmaster", new { pageIndex = pageCount,classId=classId,selectd=selectd,dateTime=dateTime })">尾页</a></li>
        </ul>

    </div>
}
